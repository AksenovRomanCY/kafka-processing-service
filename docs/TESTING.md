# Testing

## ‚úÖ Unit Tests

### –ó–∞–ø—É—Å–∫:

```bash
pytest
````

### –ß—Ç–æ –ø–æ–∫—Ä—ã—Ç–æ:

* **–í–∞–ª–∏–¥–∞—Ü–∏—è JSON** –≤ `handle_message`:

  * –≤–∞–ª–∏–¥–Ω—ã–π payload
  * –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON
  * –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—è `value` –∏–ª–∏ `null`
  * –Ω–µ—á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  * float –∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞

* **–õ–æ–≥–∏–∫–∞ Celery-—Ç–∞—Å–∫–æ–≤** `task_1` –∏ `task_2`:

  * —É—Å–ø–µ—à–Ω—ã–π –ø—É—Ç—å (`value + 100 ‚Üí task_2.delay`; `value - 1000 ‚Üí send_to_kafka`)
  * –≤–µ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (—Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ `random_fail`)

* **–ü–æ–¥–º–µ–Ω–∞ –≤—Å–µ—Ö –≤—ã–∑–æ–≤–æ–≤** `send_to_kafka` –Ω–∞ –∑–∞–≥–ª—É—à–∫—É

## üî¨ E2E (docker-compose)

```bash
docker-compose up --build --abort-on-container-exit
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:
* –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
* –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –ø—Ä–æ–¥—å—é—Å–µ—Ä / –∫–æ–Ω—Å—å—é–º–µ—Ä —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
